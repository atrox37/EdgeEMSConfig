# Tauri + Vue 3 æ¡Œé¢åº”ç”¨å¼€å‘è§„åˆ™

## é¡¹ç›®æ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ªåŸºäº Tauri 2.0 + Vue 3 + TypeScript çš„ç°ä»£åŒ–æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œä¸“æ³¨äºPCç®¡ç†åŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå‰ç«¯ä½¿ç”¨Vue 3 Composition APIï¼Œåç«¯ä½¿ç”¨Rustæä¾›ç³»ç»Ÿçº§åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆè§„èŒƒ

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Vue 3.5+ (Composition API + `<script setup>`)
- **è¯­è¨€**: TypeScript 5.6+
- **æ„å»ºå·¥å…·**: Vite 6.0+
- **åŒ…ç®¡ç†å™¨**: pnpm (æ¨èç‰ˆæœ¬ 8.0+)
- **çŠ¶æ€ç®¡ç†**: Pinia (å¦‚éœ€è¦)
- **è·¯ç”±**: Vue Router 4+
- **UIç»„ä»¶**: ä¼˜å…ˆä½¿ç”¨åŸç”ŸHTML/CSSï¼Œå¿…è¦æ—¶å¼•å…¥è½»é‡çº§UIåº“

### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Tauri 2.0+
- **è¯­è¨€**: Rust (æœ€æ–°ç¨³å®šç‰ˆ)
- **ç³»ç»ŸAPI**: é€šè¿‡Tauri APIè®¿é—®ç³»ç»ŸåŠŸèƒ½
- **æƒé™ç®¡ç†**: éµå¾ªæœ€å°æƒé™åŸåˆ™

## ä»£ç è§„èŒƒ

### Vue 3 å¼€å‘è§„èŒƒ
```typescript
// âœ… æ¨èï¼šä½¿ç”¨ Composition API + <script setup>
<script setup lang="ts">
import { ref, reactive, computed, onMounted } from 'vue'
import { invoke } from '@tauri-apps/api/core'

// å“åº”å¼æ•°æ®
const count = ref(0)
const state = reactive({
  loading: false,
  data: null
})

// è®¡ç®—å±æ€§
const doubleCount = computed(() => count.value * 2)

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  // åˆå§‹åŒ–é€»è¾‘
})

// æ–¹æ³•å®šä¹‰
const handleClick = async () => {
  try {
    state.loading = true
    const result = await invoke('my_command')
    state.data = result
  } catch (error) {
    console.error('æ“ä½œå¤±è´¥:', error)
  } finally {
    state.loading = false
  }
}
</script>

<template>
  <div class="container">
    <h1>{{ title }}</h1>
    <button @click="handleClick" :disabled="state.loading">
      {{ state.loading ? 'åŠ è½½ä¸­...' : 'ç‚¹å‡»æˆ‘' }}
    </button>
  </div>
</template>

<style scoped>
.container {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}
</style>
```

### TypeScript è§„èŒƒ
- æ‰€æœ‰å˜é‡ã€å‡½æ•°ã€ç»„ä»¶éƒ½å¿…é¡»æœ‰æ˜ç¡®çš„ç±»å‹å®šä¹‰
- ä½¿ç”¨æ¥å£å®šä¹‰å¤æ‚æ•°æ®ç»“æ„
- ä¼˜å…ˆä½¿ç”¨ `interface` è€Œé `type` å®šä¹‰å¯¹è±¡ç»“æ„
- ä½¿ç”¨æ³›å‹æé«˜ä»£ç å¤ç”¨æ€§

```typescript
// âœ… æ¨èï¼šæ˜ç¡®çš„ç±»å‹å®šä¹‰
interface UserInfo {
  id: number
  name: string
  email: string
  avatar?: string
}

interface ApiResponse<T> {
  code: number
  message: string
  data: T
}

const fetchUserInfo = async (id: number): Promise<ApiResponse<UserInfo>> => {
  // å®ç°é€»è¾‘
}
```

### Rust åç«¯è§„èŒƒ
```rust
// âœ… æ¨èï¼šæ¸…æ™°çš„æ¨¡å—ç»“æ„å’Œé”™è¯¯å¤„ç†
use tauri::{command, AppHandle, Manager};
use serde::{Deserialize, Serialize};
use anyhow::Result;

#[derive(Debug, Serialize, Deserialize)]
pub struct SystemInfo {
    pub cpu_usage: f64,
    pub memory_usage: f64,
    pub disk_usage: f64,
}

#[command]
pub async fn get_system_info() -> Result<SystemInfo, String> {
    // å®ç°ç³»ç»Ÿä¿¡æ¯è·å–é€»è¾‘
    Ok(SystemInfo {
        cpu_usage: 0.0,
        memory_usage: 0.0,
        disk_usage: 0.0,
    })
}

// é”™è¯¯å¤„ç†
#[command]
pub async fn risky_operation() -> Result<String, String> {
    match some_risky_function() {
        Ok(result) => Ok(result),
        Err(e) => {
            eprintln!("æ“ä½œå¤±è´¥: {}", e);
            Err(format!("æ“ä½œå¤±è´¥: {}", e))
        }
    }
}
```

## é¡¹ç›®ç»“æ„è§„èŒƒ

```
PCManagement/
â”œâ”€â”€ src/                          # Vueå‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/               # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ common/              # é€šç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ business/            # ä¸šåŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ views/                   # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ stores/                  # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ types/                   # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ assets/                  # é™æ€èµ„æº
â”‚   â”œâ”€â”€ App.vue                  # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts                  # åº”ç”¨å…¥å£
â”œâ”€â”€ src-tauri/                   # Tauriåç«¯æºç 
â”‚   â”œâ”€â”€ src/                     # Rustæºç 
â”‚   â”‚   â”œâ”€â”€ commands/            # Tauriå‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ lib.rs               # åº“å…¥å£
â”‚   â”‚   â””â”€â”€ main.rs              # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ Cargo.toml               # Rusté¡¹ç›®é…ç½®
â”‚   â””â”€â”€ tauri.conf.json          # Tauriåº”ç”¨é…ç½®
â”œâ”€â”€ public/                      # å…¬å…±é™æ€æ–‡ä»¶
â”œâ”€â”€ .cursorrules                 # Cursorå¼€å‘è§„åˆ™
â”œâ”€â”€ package.json                 # Node.jsé¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json                # TypeScripté…ç½®
â”œâ”€â”€ vite.config.ts               # Viteæ„å»ºé…ç½®
â””â”€â”€ README.md                    # é¡¹ç›®æ–‡æ¡£
```

## å¼€å‘æœ€ä½³å®è·µ

### 1. ç»„ä»¶è®¾è®¡åŸåˆ™
- **å•ä¸€èŒè´£**: æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- **å¯å¤ç”¨æ€§**: è®¾è®¡é€šç”¨çš„ã€å¯é…ç½®çš„ç»„ä»¶
- **ç±»å‹å®‰å…¨**: æ‰€æœ‰propså’Œemitséƒ½è¦æœ‰ç±»å‹å®šä¹‰
- **æ€§èƒ½ä¼˜åŒ–**: åˆç†ä½¿ç”¨`v-memo`ã€`v-once`ç­‰æŒ‡ä»¤

### 2. çŠ¶æ€ç®¡ç†
- ä½¿ç”¨Piniaè¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†
- æœ¬åœ°çŠ¶æ€ä¼˜å…ˆä½¿ç”¨`ref`å’Œ`reactive`
- å¤æ‚çŠ¶æ€é€»è¾‘ä½¿ç”¨`composables`

### 3. é”™è¯¯å¤„ç†
- å‰ç«¯ï¼šä½¿ç”¨try-catchåŒ…è£…å¼‚æ­¥æ“ä½œ
- åç«¯ï¼šä½¿ç”¨Resultç±»å‹å¤„ç†é”™è¯¯
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

### 4. æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨Viteçš„ä»£ç åˆ†å‰²åŠŸèƒ½
- å›¾ç‰‡èµ„æºä¼˜åŒ–å’Œæ‡’åŠ è½½
- åˆç†ä½¿ç”¨ç¼“å­˜ç­–ç•¥

### 5. å®‰å…¨æ€§
- è¾“å…¥éªŒè¯å’Œæ¸…ç†
- æœ€å°æƒé™åŸåˆ™
- æ•æ„Ÿä¿¡æ¯ä¿æŠ¤

## Tauri ç‰¹å®šè§„èŒƒ

### 1. å‘½ä»¤å®šä¹‰
```rust
// âœ… æ¨èï¼šæ¸…æ™°çš„å‘½ä»¤ç»“æ„
#[command]
pub async fn get_app_info() -> Result<AppInfo, String> {
    // å®ç°é€»è¾‘
}

#[command]
pub async fn update_settings(settings: Settings) -> Result<(), String> {
    // å®ç°é€»è¾‘
}
```

### 2. å‰ç«¯è°ƒç”¨
```typescript
// âœ… æ¨èï¼šç±»å‹å®‰å…¨çš„APIè°ƒç”¨
import { invoke } from '@tauri-apps/api/core'

interface AppInfo {
  name: string
  version: string
}

const getAppInfo = async (): Promise<AppInfo> => {
  return await invoke<AppInfo>('get_app_info')
}
```

### 3. æƒé™é…ç½®
```json
// tauri.conf.json
{
  "app": {
    "security": {
      "csp": "default-src 'self'; img-src 'self' asset: https://asset.localhost; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'",
      "pattern": {
        "use": "isolation",
        "options": {
          "dir": "../dist-isolation"
        }
      }
    }
  },
  "permissions": [
    "core:default",
    "fs:default",
    "shell:default"
  ]
}
```

### 4. å®‰å…¨éš”ç¦» (Isolation) è§„èŒƒ
- **å¯ç”¨isolation**: æ‰€æœ‰ç”Ÿäº§ç¯å¢ƒå¿…é¡»å¯ç”¨isolation
- **CSPç­–ç•¥**: é…ç½®ä¸¥æ ¼çš„å†…å®¹å®‰å…¨ç­–ç•¥
- **éš”ç¦»å±‚è®¾è®¡**: ä¿æŒéš”ç¦»å±‚ä»£ç ç®€æ´ï¼ŒåªåŒ…å«å®‰å…¨éªŒè¯
- **APIå®‰å…¨**: é€šè¿‡Tauriå‘½ä»¤æš´éœ²å®‰å…¨çš„APIæ¥å£
- **è¾“å…¥éªŒè¯**: åœ¨éš”ç¦»å±‚ä¸­å¤„ç†æ‰€æœ‰ç”¨æˆ·è¾“å…¥éªŒè¯

```rust
// âœ… æ¨èï¼šå®‰å…¨çš„å‘½ä»¤å®šä¹‰
#[command]
pub async fn secure_operation(input: String) -> Result<String, String> {
    // è¾“å…¥éªŒè¯
    if input.is_empty() || input.len() > 1000 {
        return Err("è¾“å…¥æ— æ•ˆ".to_string());
    }
    
    // ä¸šåŠ¡é€»è¾‘
    match process_input(input) {
        Ok(result) => Ok(result),
        Err(e) => {
            eprintln!("æ“ä½œå¤±è´¥: {}", e);
            Err("æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•".to_string())
        }
    }
}
```

## ä»£ç è´¨é‡è¦æ±‚

### 1. ä»£ç é£æ ¼
- ä½¿ç”¨Prettierè¿›è¡Œä»£ç æ ¼å¼åŒ–
- ä½¿ç”¨ESLintè¿›è¡Œä»£ç æ£€æŸ¥
- éµå¾ªVue 3å®˜æ–¹é£æ ¼æŒ‡å—

### 2. æ³¨é‡Šè§„èŒƒ
```typescript
/**
 * è·å–ç³»ç»Ÿä¿¡æ¯
 * @param includeDetails æ˜¯å¦åŒ…å«è¯¦ç»†ä¿¡æ¯
 * @returns Promise<SystemInfo> ç³»ç»Ÿä¿¡æ¯å¯¹è±¡
 */
const getSystemInfo = async (includeDetails: boolean = false): Promise<SystemInfo> => {
  // å®ç°é€»è¾‘
}
```

### 3. æµ‹è¯•è¦æ±‚
- å…³é”®ä¸šåŠ¡é€»è¾‘å¿…é¡»æœ‰å•å…ƒæµ‹è¯•
- ç»„ä»¶æµ‹è¯•ä½¿ç”¨Vue Test Utils
- é›†æˆæµ‹è¯•è¦†ç›–ä¸»è¦ç”¨æˆ·æµç¨‹


## éƒ¨ç½²å’Œæ„å»º

### 1. å¼€å‘ç¯å¢ƒ
```bash
# å¯åŠ¨å¼€å‘æ¨¡å¼
pnpm tauri dev

# ä»…å¯åŠ¨å‰ç«¯
pnpm dev

# ç±»å‹æ£€æŸ¥
pnpm vue-tsc --noEmit
```

### 2. ç”Ÿäº§æ„å»º
```bash
# æ„å»ºæ¡Œé¢åº”ç”¨
pnpm tauri build

# æ„å»ºå‰ç«¯
pnpm build
```

### 3. å‘å¸ƒå‡†å¤‡
- ç‰ˆæœ¬å·ç®¡ç†éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬
- æ›´æ–°CHANGELOG.md
- å‡†å¤‡å‘å¸ƒè¯´æ˜

## å•†ä¸šåŒ–è€ƒè™‘

### 1. ç”¨æˆ·ä½“éªŒ
- åº”ç”¨å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–
- ç•Œé¢å“åº”æµç•…
- é”™è¯¯å¤„ç†å‹å¥½
- å¤šè¯­è¨€æ”¯æŒå‡†å¤‡

### 2. å®‰å…¨æ€§
- ä»£ç æ··æ·†å’ŒåŠ å¯†
- æ•æ„Ÿä¿¡æ¯ä¿æŠ¤
- æƒé™æœ€å°åŒ–
- å®‰å…¨æ›´æ–°æœºåˆ¶

### 3. å¯ç»´æŠ¤æ€§
- æ¸…æ™°çš„ä»£ç ç»“æ„
- å®Œå–„çš„æ–‡æ¡£
- è‡ªåŠ¨åŒ–æµ‹è¯•
- æŒç»­é›†æˆ

### 4. æ‰©å±•æ€§
- æ’ä»¶åŒ–æ¶æ„
- é…ç½®åŒ–ç®¡ç†
- æ¨¡å—åŒ–è®¾è®¡
- APIç‰ˆæœ¬æ§åˆ¶

## å¼€å‘å·¥å…·é…ç½®

### VS Code æ¨èæ’ä»¶
- Vue - Official (Volar)
- Tauri
- rust-analyzer
- TypeScript Importer
- Prettier
- ESLint

### å¼€å‘ç¯å¢ƒå˜é‡
```bash
# .env.development
VITE_APP_TITLE=PCç®¡ç†å·¥å…·
VITE_APP_VERSION=1.0.0
VITE_TAURI_DEBUG=true
```

## æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡å¼€å‘**: ç¡®ä¿Rustç¯å¢ƒæ­£ç¡®å®‰è£…
2. **çƒ­é‡è½½**: å‰ç«¯ä»£ç ä¿®æ”¹ä¼šå®æ—¶æ›´æ–°ï¼ŒRustä»£ç éœ€è¦é‡å¯
3. **è°ƒè¯•**: ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è°ƒè¯•å‰ç«¯
4. **æ€§èƒ½**: æ³¨æ„å†…å­˜ä½¿ç”¨å’ŒCPUå ç”¨
5. **å…¼å®¹æ€§**: æµ‹è¯•ä¸åŒWindowsç‰ˆæœ¬çš„å…¼å®¹æ€§
6. **ç†è§£æ€§**: æ¯æ¬¡è§£å†³å®Œé—®é¢˜ï¼Œéƒ½è¦å‘Šè¯‰æˆ‘å…·ä½“çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ
 

---

**éµå¾ªè¿™äº›è§„èŒƒï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œé¡¹ç›®çš„å•†ä¸šåŒ–æˆåŠŸï¼** ğŸš€
